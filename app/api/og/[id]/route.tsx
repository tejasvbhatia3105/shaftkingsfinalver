import { ImageResponse } from '@vercel/og';

import type { Market } from '@/types/market';
import { MarketType } from '@/types/market';
import { convertToPercentage } from '@/utils/convertToPercentage';

export const runtime = 'edge';

export async function GET(
  _: Request,
  { params }: { params: Promise<{ id: string }> }
) {
  try {
    const marketId = (await params).id;

    const response = await fetch(
      `https://beta.triadmarkets.com/market/${marketId}/og`,
      {
        next: { revalidate: 600 },
        headers: {
          'cloudflare-secret': process.env.CLOUDFLARE_SECRET!,
        },
      }
    );

    const market = (await response.json()) as Market;

    const singleMarketValues = () => {
      const totalPrice = Number(market.hypePrice) + Number(market.flopPrice);
      const hypePercentagePrice =
        totalPrice > 0 ? (Number(market.hypePrice) / totalPrice) * 100 : 0;
      const flopPercentagePrice =
        totalPrice > 0 ? (Number(market.flopPrice) / totalPrice) * 100 : 0;

      return {
        totalPrice,
        hypePercentagePrice,
        flopPercentagePrice,
      };
    };

    const singleMarket = singleMarketValues();

    const percentage = singleMarket.hypePercentagePrice;
    const flopPercentage = singleMarket.flopPercentagePrice;

    return new ImageResponse(
      (
        <div
          style={{
            height: '100%',
            width: '100%',
            display: 'flex',
            flexDirection: 'column',
            alignItems: 'center',
            justifyContent: 'center',
            backgroundColor: 'white',
            position: 'relative',
          }}
        >
          <div
            style={{
              position: 'absolute',
              left: 0,
              top: 0,
              background: '#fff',
              width: '100%',
              height: '100%',
              display: 'flex',
            }}
          >
            <svg
              width="1200"
              height="675"
              viewBox="0 0 1200 675"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g clipPath="url(#clip0_30405_3769)">
                <rect width="1200" height="675" fill="#0f1116" />
                <g filter="url(#filter0_bd_30405_3769)">
                  <rect
                    x="951"
                    y="462"
                    width="1081.96"
                    height="586.455"
                    rx="20"
                    fill="#0f1116"
                    fillOpacity="0.08"
                    shapeRendering="crispEdges"
                  />
                  <rect
                    x="952.568"
                    y="463.568"
                    width="1078.83"
                    height="583.319"
                    rx="18.4319"
                    stroke="#0f1116"
                    stroke-opacity="0.2"
                    strokeWidth="3.13612"
                    shapeRendering="crispEdges"
                  />
                </g>
                <ellipse
                  opacity="0.6"
                  cx="88.9513"
                  cy="618.005"
                  rx="775.774"
                  ry="453.929"
                  transform="rotate(-2.40019 88.9513 618.005)"
                  fill="url(#paint0_radial_30405_3769)"
                />
                <ellipse
                  opacity="0.6"
                  cx="1253.58"
                  cy="-25.649"
                  rx="841.575"
                  ry="343.237"
                  fill="url(#paint1_radial_30405_3769)"
                />
              </g>
              <defs>
                <filter
                  id="filter0_bd_30405_3769"
                  x="660.935"
                  y="171.935"
                  width="1662.09"
                  height="1166.59"
                  filterUnits="userSpaceOnUse"
                  colorInterpolationFilters="sRGB"
                >
                  <feFlood floodOpacity="0" result="BackgroundImageFix" />
                  <feGaussianBlur
                    in="BackgroundImageFix"
                    stdDeviation="145.033"
                  />
                  <feComposite
                    in2="SourceAlpha"
                    operator="in"
                    result="effect1_backgroundBlur_30405_3769"
                  />
                  <feColorMatrix
                    in="SourceAlpha"
                    type="matrix"
                    values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                    result="hardAlpha"
                  />
                  <feMorphology
                    radius="10.8747"
                    operator="dilate"
                    in="SourceAlpha"
                    result="effect2_dropShadow_30405_3769"
                  />
                  <feOffset />
                  <feGaussianBlur stdDeviation="61.17" />
                  <feComposite in2="hardAlpha" operator="out" />
                  <feColorMatrix
                    type="matrix"
                    values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"
                  />
                  <feBlend
                    mode="normal"
                    in2="effect1_backgroundBlur_30405_3769"
                    result="effect2_dropShadow_30405_3769"
                  />
                  <feBlend
                    mode="normal"
                    in="SourceGraphic"
                    in2="effect2_dropShadow_30405_3769"
                    result="shape"
                  />
                </filter>
                <radialGradient
                  id="paint0_radial_30405_3769"
                  cx="0"
                  cy="0"
                  r="1"
                  gradientUnits="userSpaceOnUse"
                  gradientTransform="translate(1.30377 659.47) rotate(26.3376) scale(558.698 450.506)"
                >
                  <stop stopColor="#263F9D" />
                  <stop offset="1" stopColor="#13528c" stopOpacity="0" />
                </radialGradient>
                <radialGradient
                  id="paint1_radial_30405_3769"
                  cx="0"
                  cy="0"
                  r="1"
                  gradientUnits="userSpaceOnUse"
                  gradientTransform="translate(1158.5 5.70444) rotate(19.0375) scale(574.6 359.316)"
                >
                  <stop stopColor="#13528c" />
                  <stop offset="1" stopColor="#13528c" stopOpacity="0" />
                </radialGradient>
                <clipPath id="clip0_30405_3769">
                  <rect width="1200" height="675" fill="#9a7519" />
                </clipPath>
              </defs>
            </svg>
          </div>

          <div
            style={{
              display: 'flex',
              flexDirection: 'column',
              justifyContent: 'space-between',
              width: '100%',
              height: '100%',
              gap: '24px',
              padding: '70px',
            }}
          >
            <div
              style={{
                display: 'flex',
                alignItems: 'center',
                justifyItems: 'center',
              }}
            >
              <span
                style={{
                  fontSize: '36px',
                  color: '#F8E173',
                }}
              >
                ShaftKings
              </span>
              <span
                style={{
                  height: '50px',
                  width: '1px',
                  background: '#fff',
                  margin: '5px 20px 0px 20px',
                }}
              ></span>
              <div
                style={{
                  color: '#fff',
                  fontSize: '36px',
                  marginTop: '10px',
                }}
              >
                Prediction Market
              </div>
            </div>

            <div
              style={{
                display: 'flex',
                alignItems: 'center',
                gap: '20px',
              }}
            >
              <img
                width={144}
                height={144}
                style={{
                  width: 144,
                  height: 144,
                  objectFit: 'cover',
                  borderRadius: 8,
                }}
                src={market.image}
                alt={market.question}
              />
              <div
                style={{
                  fontSize: '52px',
                  lineHeight: '54px',
                  fontWeight: 'bold',
                  color: '#fff',
                }}
              >
                {market.question}
              </div>
            </div>
            {market.type !== MarketType.POOL && (
              <div
                style={{
                  display: 'flex',
                  flexDirection: 'column',
                }}
              >
                <div
                  style={{
                    display: 'flex',
                    justifyContent: 'space-between',
                    alignItems: 'center',
                    width: '100%',
                  }}
                >
                  <div
                    style={{
                      fontSize: '55px',
                      fontWeight: '900',
                      color: '#fff',
                    }}
                  >
                    {convertToPercentage(percentage)}
                  </div>
                  <div
                    style={{
                      color: '#A1A7BB',
                      fontSize: '40px',
                    }}
                  >
                    Chance
                  </div>
                  <div
                    style={{
                      fontSize: '55px',
                      fontWeight: '900',
                      color: '#fff',
                    }}
                  >
                    {convertToPercentage(flopPercentage)}
                  </div>
                </div>

                <div
                  style={{
                    display: 'flex',
                    width: '99%',
                    height: '8px',
                  }}
                >
                  <div
                    style={{
                      width: `${convertToPercentage(percentage)}%`,
                      backgroundColor: '#22c55e',
                      borderRadius: '4px 0 0 4px',
                      marginRight: '10px',
                    }}
                  />
                  <div
                    style={{
                      width: `${convertToPercentage(flopPercentage)}%`,
                      backgroundColor: '#ef4444',
                      borderRadius: '0 4px 4px 0',
                    }}
                  />
                </div>
              </div>
            )}

            <div
              style={{
                display: 'flex',
                justifyContent: 'space-between',
                width: '100%',
              }}
            >
              <div
                style={{
                  width: '49%',
                  backgroundColor: '#00B471',
                  color: '#fff',
                  padding: '32px 24px',
                  borderRadius: '8px',
                  fontSize: '24px',
                  justifyContent: 'center',
                  alignItems: 'center',
                  display: 'flex',
                  fontWeight: 800,
                }}
              >
                <svg
                  width="80"
                  height="30"
                  viewBox="0 0 84 38"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M5.90501 37.5293C3.18626 37.1586 1.53338 35.7219 0.946378 33.2195L0.99272 32.7097C1.1163 32.339 1.25533 31.9219 1.4098 31.4585C1.56428 30.9332 1.7342 30.4235 1.91957 29.9292C2.10494 29.4039 2.41389 28.9405 2.84641 28.5389C2.9391 28.2608 3.10902 27.8437 3.35618 27.2876C3.63423 26.7006 4.08221 25.8356 4.70011 24.6925C5.19443 23.7965 5.58061 23.0859 5.85867 22.5607C6.16761 22.0355 6.41477 21.6339 6.60014 21.3558C6.29119 20.7997 5.85867 20.2591 5.30256 19.7338C4.80824 18.807 4.37571 17.9265 4.00497 17.0923C3.66513 16.2273 3.40252 15.4549 3.21715 14.7752C3.18626 14.0337 3.06268 13.2768 2.84641 12.5044C2.75373 12.1028 2.66104 11.7012 2.56836 11.2995C2.47567 10.8979 2.42933 10.4808 2.42933 10.0483C2.30575 9.83203 2.19762 9.55398 2.10494 9.21413L2.19762 8.65802C2.3521 8.41087 2.38299 8.08647 2.29031 7.68484C2.22852 7.25231 2.13583 6.81978 2.01225 6.38725C1.91957 5.98562 1.82688 5.56854 1.7342 5.13601C1.67241 4.67258 1.65696 4.22461 1.68786 3.79208C1.71875 3.35955 1.82688 2.94247 2.01225 2.54084C2.22852 2.1392 2.58381 1.79936 3.07813 1.52131L3.54155 1.19691L4.00497 1.47496C4.34482 1.69123 4.66921 1.8766 4.97816 2.03107C5.28711 2.18555 5.59606 2.34002 5.90501 2.49449C6.27575 2.67986 6.64648 2.88068 7.01722 3.09694C7.38796 3.28231 7.7896 3.49858 8.22212 3.74574L8.68555 4.07013L8.63921 4.5799C8.63921 4.64169 8.65465 4.71893 8.68555 4.81161C8.71644 4.9043 8.76278 4.98153 8.82457 5.04332L9.33434 5.18235L9.38068 5.83114V6.38725C9.38068 6.6653 9.39613 6.86612 9.42702 6.9897C9.45792 7.08238 9.51971 7.19052 9.61239 7.3141L9.84411 7.91655C9.84411 8.47265 9.89045 8.96697 9.98313 9.3995C10.0758 9.83203 10.1839 10.2646 10.3075 10.6971C10.462 11.1296 10.5856 11.5776 10.6783 12.041C10.771 12.4735 10.7864 12.9524 10.7246 13.4776C10.91 13.3849 11.0953 13.2459 11.2807 13.0605C11.3425 12.9988 11.4043 12.937 11.4661 12.8752C11.5588 12.8134 11.6515 12.7516 11.7441 12.6898L14.9881 8.28729L14.8954 7.73118L16.054 6.61896C16.3629 6.3718 16.6564 6.12464 16.9345 5.87748C17.2125 5.59943 17.4442 5.29048 17.6296 4.95064L17.9077 4.53356C19.2979 2.67986 21.0898 1.53675 23.2834 1.10422L24.0712 0.918855L24.3029 1.66033C24.4574 2.09286 24.7509 2.47905 25.1834 2.81889C25.6468 3.12784 26.1412 3.43679 26.6664 3.74574L27.1761 4.07013C27.3615 4.44087 27.4542 4.71893 27.4542 4.9043C27.4542 5.08966 27.4387 5.24414 27.4078 5.36772L27.6396 5.97017C27.2997 6.86612 26.929 7.51491 26.5273 7.91655C26.1257 8.28729 25.7086 8.64258 25.2761 8.98242C24.9363 9.26047 24.6273 9.53853 24.3493 9.81658C24.0712 10.0946 23.8549 10.4036 23.7005 10.7434L23.3297 11.2069C22.5574 11.6085 22.063 12.1955 21.8468 12.9679L21.6614 13.6167H20.9663C20.9354 13.6167 20.8581 13.6939 20.7346 13.8484C20.611 13.9719 20.4256 14.2963 20.1784 14.8216C19.9004 15.1923 19.6996 15.4395 19.576 15.563C19.4833 15.6557 19.4061 15.733 19.3443 15.7947C19.2825 15.9492 19.2207 16.0882 19.1589 16.2118C19.128 16.3354 19.0817 16.4899 19.0199 16.6752L18.7418 17.046C18.4638 17.2931 18.263 17.5403 18.1394 17.7875C18.0158 18.0037 17.8768 18.2663 17.7223 18.5753C17.5987 18.8533 17.4597 19.1468 17.3052 19.4558C17.1507 19.7338 16.9345 20.0119 16.6564 20.2899L16.7491 20.7997L16.3784 21.1241C16.1312 21.3404 15.915 21.6184 15.7296 21.9583C15.5442 22.2672 15.3588 22.5916 15.1735 22.9315C14.9881 23.3022 14.7873 23.6729 14.571 24.0437C14.3548 24.4144 14.0767 24.7543 13.7369 25.0632C13.5206 25.6193 13.3198 26.0518 13.1344 26.3608C12.9799 26.6697 12.7019 27.0405 12.3002 27.473C11.9295 28.956 11.049 30.5471 9.65874 32.2463C9.62784 32.5861 9.51971 32.926 9.33434 33.2658C9.17987 33.5748 9.00994 33.8683 8.82457 34.1463C8.76278 34.2699 8.68555 34.4089 8.59286 34.5634C8.53107 34.687 8.48473 34.7797 8.45384 34.8414L8.31481 35.3512C8.12944 35.6911 7.92862 35.9691 7.71236 36.1854C7.52699 36.4016 7.34162 36.6025 7.15625 36.7878C7.06357 36.8496 6.97088 36.9268 6.8782 37.0195C6.81641 37.1122 6.75462 37.1895 6.69283 37.2512L5.90501 37.5293ZM24.5235 34.4244C24.2763 34.1772 24.091 33.8837 23.9674 33.5439C23.8747 33.204 23.6276 32.926 23.2259 32.7097C23.1641 32.2463 23.0714 31.7211 22.9479 31.1341C22.8552 30.5162 22.747 29.8983 22.6235 29.2804C22.5308 28.6316 22.4535 27.9982 22.3918 27.3803C22.3609 26.7315 22.3918 26.1445 22.4844 25.6193C22.5462 25.3413 22.6389 25.0787 22.7625 24.8315C22.917 24.5843 23.056 24.3526 23.1796 24.1364C23.3341 23.8892 23.4422 23.642 23.504 23.3949C23.5967 23.1477 23.6121 22.9006 23.5503 22.6534C23.7357 22.6225 23.8438 22.5298 23.8747 22.3754C23.9365 22.19 24.091 22.1282 24.3381 22.19C24.5544 21.5103 24.7861 20.877 25.0333 20.2899C25.2804 19.7029 25.543 19.1314 25.8211 18.5753C26.0991 18.0192 26.3772 17.4631 26.6553 16.907C26.9642 16.32 27.2423 15.6712 27.4894 14.9606C26.9642 14.4663 26.578 13.9411 26.3309 13.3849C26.1146 12.7979 25.9447 12.2109 25.8211 11.6239C25.6975 11.0369 25.6048 10.4499 25.543 9.86292C25.4812 9.24503 25.3577 8.62713 25.1723 8.00923C25.543 7.45312 25.991 7.00515 26.5162 6.6653C27.0414 6.29457 27.613 6.00106 28.2309 5.7848C28.8797 5.53764 29.5748 5.35227 30.3163 5.22869C31.0578 5.07422 31.8456 4.9043 32.6798 4.71893C34.1627 4.2555 35.4912 3.90021 36.6652 3.65305C37.8392 3.375 38.9823 3.15873 40.0945 3.00426C41.2067 2.81889 42.3653 2.66442 43.5702 2.54084C44.7751 2.38636 46.1654 2.1701 47.741 1.89204C47.7719 1.98473 47.8182 2.03107 47.88 2.03107C47.9727 2.03107 48.0809 2.03107 48.2044 2.03107C48.2971 2.24733 48.467 2.35547 48.7142 2.35547C48.7142 2.26278 48.6988 2.18555 48.6679 2.12376C48.6679 2.03107 48.6679 1.95383 48.6679 1.89204C48.7296 1.89204 48.8069 1.90749 48.8996 1.93839C49.0232 1.96928 49.1158 2.00018 49.1776 2.03107C49.2703 2.06197 49.3475 2.06197 49.4093 2.03107C49.4711 1.96928 49.4866 1.86115 49.4557 1.70667C49.8264 2.35547 50.3053 2.89613 50.8923 3.32866C51.4793 3.73029 52.1281 4.08558 52.8387 4.39453C52.8696 4.67258 52.8696 4.8734 52.8387 4.99698C52.8387 5.12056 52.8232 5.24414 52.7923 5.36772C52.7614 5.4604 52.746 5.58398 52.746 5.73846C52.746 5.86204 52.7769 6.04741 52.8387 6.29457C52.3444 7.12873 51.7728 7.77752 51.124 8.24094C50.5061 8.70437 49.8419 9.05966 49.1313 9.30682C48.4207 9.55398 47.6638 9.73935 46.8605 9.86292C46.0881 9.9865 45.2849 10.1255 44.4507 10.28C43.6474 10.4036 42.8287 10.589 41.9946 10.8361C41.1604 11.0833 40.3417 11.454 39.5384 11.9483C39.2913 11.8556 39.0595 11.8248 38.8433 11.8556C38.6579 11.8556 38.4571 11.8865 38.2408 11.9483C38.0246 12.0101 37.7774 12.0719 37.4994 12.1337C37.2522 12.1955 36.9432 12.1955 36.5725 12.1337C36.3254 12.35 36.0318 12.5044 35.692 12.5971C35.3831 12.6898 35.0587 12.7825 34.7188 12.8752C34.8733 13.215 34.9351 13.5549 34.9042 13.8947C34.9042 14.2346 34.9505 14.5281 35.0432 14.7752C36.3408 14.8988 37.7774 14.8988 39.3531 14.7752C40.9287 14.6207 42.4734 14.5126 43.9873 14.4508C44.0182 14.6053 44.0027 14.7134 43.9409 14.7752C43.8792 14.837 43.8483 14.9451 43.8483 15.0996C44.1263 15.285 44.3889 15.5167 44.6361 15.7947C44.8832 16.0728 45.1304 16.3509 45.3776 16.6289C45.6556 16.8761 45.9337 17.0923 46.2117 17.2777C46.4898 17.4322 46.8142 17.494 47.1849 17.4631C47.3394 17.772 47.4475 18.0964 47.5093 18.4363C47.5711 18.7761 47.5247 19.1314 47.3703 19.5021C46.7524 19.9038 46.1499 20.3208 45.5629 20.7534C44.9759 21.155 44.358 21.5257 43.7092 21.8656C43.0913 22.2054 42.4116 22.4835 41.6702 22.6998C40.9287 22.916 40.1254 23.0087 39.2604 22.9778C39.1059 22.9778 38.9669 22.9778 38.8433 22.9778C38.7506 22.9778 38.627 22.916 38.4725 22.7924C38.1636 22.9469 37.7465 23.0087 37.2213 22.9778C36.727 22.916 36.3099 22.9624 35.9701 23.1168C35.5375 22.9624 35.0278 22.8851 34.4408 22.8851C33.8847 22.8851 33.3903 22.8079 32.9578 22.6534C32.4017 23.4567 31.8765 24.3063 31.3822 25.2022C30.8879 26.0673 30.4553 26.9941 30.0846 27.9828C31.3513 28.1681 32.4017 28.2454 33.2359 28.2145C34.07 28.1836 34.8578 28.1218 35.5993 28.0291C36.3408 27.9364 37.0977 27.8437 37.8701 27.7511C38.6734 27.6584 39.6466 27.6275 40.7897 27.6584C41.562 27.2876 42.4425 27.0405 43.4312 26.9169C44.4507 26.7624 45.393 26.5462 46.2581 26.2681C46.567 26.3608 46.8296 26.5462 47.0459 26.8242C47.2621 27.0714 47.463 27.334 47.6483 27.612C47.8646 27.8592 48.0809 28.0755 48.2971 28.2608C48.5134 28.4462 48.7914 28.508 49.1313 28.4462C49.2858 28.6007 49.3784 28.786 49.4093 29.0023C49.4711 29.2186 49.5175 29.4194 49.5484 29.6048C49.6102 29.7901 49.6874 29.9446 49.7801 30.0682C49.8728 30.1609 50.0427 30.1918 50.2898 30.1609C49.7028 31.3658 49.0386 32.2926 48.2971 32.9414C47.5865 33.5902 46.7678 34.1 45.841 34.4707C44.945 34.8105 43.9255 35.0732 42.7824 35.2585C41.6702 35.413 40.4189 35.6138 39.0287 35.861C38.6888 35.9228 38.3953 35.9228 38.1481 35.861C37.9319 35.7683 37.7002 35.7219 37.453 35.7219C36.588 35.8764 35.553 36.0309 34.3481 36.1854C33.1741 36.3398 31.9846 36.4016 30.7797 36.3707C29.5748 36.3398 28.4163 36.1854 27.304 35.9073C26.1918 35.6293 25.265 35.1349 24.5235 34.4244ZM51.808 15.0996C51.9007 14.6362 51.9625 14.2654 51.9934 13.9874C52.0243 13.6784 51.9161 13.354 51.669 13.0142C51.7926 12.5199 51.8853 12.1337 51.947 11.8556C52.0397 11.5776 52.0552 11.1914 51.9934 10.6971C52.2714 9.89382 52.6885 9.21413 53.2446 8.65802C53.8316 8.10192 54.465 7.63849 55.1447 7.26775C55.8244 6.86612 56.5349 6.54172 57.2764 6.29457C58.0179 6.01651 58.713 5.7848 59.3618 5.59943C59.3618 5.47585 59.3 5.41406 59.1764 5.41406C59.0529 5.41406 59.022 5.33682 59.0838 5.18235C60.7521 4.8734 62.4204 4.42542 64.0887 3.83842C65.788 3.25142 67.5181 2.72621 69.2791 2.26278C71.0401 1.79936 72.8474 1.52131 74.7011 1.42862C76.5548 1.30504 78.5012 1.53675 80.5403 2.12376C80.6638 2.49449 80.8338 2.84979 81.05 3.18963C81.2663 3.52947 81.4826 3.86932 81.6988 4.20916C81.946 4.51811 82.1622 4.82706 82.3476 5.13601C82.533 5.44496 82.6411 5.76935 82.672 6.1092C83.0427 6.44904 83.3362 6.81978 83.5525 7.22141C83.7997 7.59215 83.846 8.10192 83.6915 8.75071C83.3517 8.99787 82.9964 9.24503 82.6257 9.49219C82.2549 9.73935 81.8687 9.97106 81.4671 10.1873C80.0768 9.84748 78.6866 9.7239 77.2963 9.81658C75.906 9.90927 74.6548 10.0174 73.5426 10.141C73.2027 9.77024 72.8011 9.60032 72.3377 9.63121C71.8742 9.63121 71.3799 9.70845 70.8547 9.86292C70.3604 9.9865 69.8661 10.1255 69.3718 10.28C68.8774 10.4036 68.414 10.4345 67.9815 10.3727C67.6416 10.6816 67.1937 10.8979 66.6376 11.0215C66.0815 11.1142 65.4945 11.1914 64.8766 11.2532C64.8457 11.4077 64.8766 11.5158 64.9692 11.5776C65.0619 11.6394 65.0774 11.763 65.0156 11.9483C65.2318 12.2264 65.5253 12.4272 65.8961 12.5508C66.2668 12.6435 66.6376 12.7361 67.0083 12.8288C67.4099 12.9215 67.7652 13.0605 68.0742 13.2459C68.3831 13.4004 68.5839 13.663 68.6766 14.0337C69.2327 14.0646 69.7116 14.2191 70.1132 14.4972C70.5149 14.7443 70.8547 15.0533 71.1328 15.424C71.4108 15.7947 71.6116 16.1964 71.7352 16.6289C71.8588 17.0305 71.9051 17.4013 71.8742 17.7411C71.9978 18.0501 72.1214 18.1736 72.245 18.1119C72.3995 18.0501 72.5694 18.1273 72.7548 18.3436C72.8783 18.807 73.1564 19.3013 73.5889 19.8265C74.0523 20.3208 74.4076 20.8615 74.6548 21.4485C74.7166 22.3754 74.7629 23.2095 74.7938 23.951C74.8556 24.6925 74.732 25.4185 74.4231 26.1291C73.8979 27.4885 73.1409 28.7088 72.1523 29.7901C71.1637 30.8714 70.036 31.8292 68.7693 32.6634C67.5335 33.4666 66.2205 34.1772 64.8302 34.7951C63.4399 35.3821 62.0651 35.8764 60.7057 36.2781C60.5822 36.2472 60.4277 36.2472 60.2423 36.2781C60.0878 36.3089 60.057 36.2163 60.1496 36C59.8716 36.2472 59.5472 36.4016 59.1764 36.4634C58.8366 36.5252 58.4504 36.5407 58.0179 36.5098C57.6163 36.5098 57.1992 36.4943 56.7666 36.4634C56.365 36.4325 55.9634 36.448 55.5617 36.5098C55.3146 36.2626 55.0829 36.0154 54.8666 35.7683C54.6812 35.5211 54.5268 35.2276 54.4032 34.8878C54.2487 34.8569 54.1715 34.7642 54.1715 34.6097C54.2024 34.4244 54.1406 34.3317 53.9861 34.3317C53.9861 34.2081 54.0016 34.1154 54.0324 34.0536C54.0633 33.9918 54.0942 33.93 54.1251 33.8683C54.2487 33.7756 54.2951 33.7138 54.2642 33.6829C54.2642 33.6211 54.2178 33.5748 54.1251 33.5439C54.0633 33.4821 53.9861 33.4203 53.8934 33.3585C53.8316 33.2967 53.8162 33.2195 53.8471 33.1268C54.0016 32.8487 54.0479 32.5243 53.9861 32.1536C53.9552 31.752 53.9243 31.3503 53.8934 30.9487C53.8625 30.5471 53.8934 30.1763 53.9861 29.8365C54.0788 29.4657 54.3414 29.1568 54.7739 28.9096C56.0406 29.0332 57.2301 28.9714 58.3423 28.7243C59.4854 28.4771 60.5513 28.1373 61.5399 27.7047C62.5594 27.2722 63.5172 26.8088 64.4131 26.3145C65.34 25.7892 66.2359 25.3104 67.101 24.8778C67.1937 24.5689 67.3327 24.3063 67.5181 24.09C67.7343 23.8738 67.9506 23.6729 68.1669 23.4876C68.3831 23.2713 68.5839 23.055 68.7693 22.8388C68.9547 22.5916 69.0937 22.2981 69.1864 21.9583C69.2173 21.8347 69.2173 21.742 69.1864 21.6802C69.1555 21.6184 69.1092 21.5721 69.0474 21.5412C68.9856 21.4794 68.9238 21.4176 68.862 21.3558C68.8002 21.294 68.7693 21.2013 68.7693 21.0778C68.6766 21.0469 68.5839 21.016 68.4913 20.9851C68.4295 20.9542 68.3677 20.9387 68.3059 20.9387C67.5026 20.5371 66.653 20.1973 65.7571 19.9192C64.8611 19.6412 64.1042 19.3322 63.4863 18.9924C63.1155 19.2395 62.7448 19.3013 62.3741 19.1777C62.0033 19.0542 61.5554 18.9306 61.0301 18.807C59.7326 18.7452 58.4968 18.6216 57.3228 18.4363C56.1796 18.2509 55.0674 17.9265 53.9861 17.4631C53.9243 17.2777 53.8471 17.1232 53.7544 16.9996C53.6617 16.8452 53.4454 16.7988 53.1056 16.8606C52.8893 16.5517 52.6576 16.2736 52.4105 16.0265C52.1942 15.7484 51.9934 15.4395 51.808 15.0996Z"
                    fill="white"
                  />
                </svg>
              </div>
              <div
                style={{
                  width: '49%',
                  backgroundColor: '#EE5F67',
                  color: '#fff',
                  padding: '32px 24px',
                  borderRadius: '8px',
                  fontSize: '24px',
                  justifyContent: 'center',
                  alignItems: 'center',
                  display: 'flex',
                  fontWeight: 700,
                }}
              >
                <svg
                  width="67"
                  height="37"
                  viewBox="0 0 67 37"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M9.38796 31.6438C9.07901 31.891 8.89364 32.2154 8.83185 32.617C8.77006 32.9877 8.69283 33.3585 8.60014 33.7292C8.50746 34.1 8.33754 34.4244 8.09038 34.7024C7.87411 34.9496 7.47248 35.0577 6.88548 35.0268C6.7619 35.1813 6.731 35.274 6.79279 35.3049C6.88548 35.3358 6.96271 35.4748 7.0245 35.7219C6.59197 35.6602 6.28303 35.6911 6.09766 35.8146C5.91229 35.9382 5.68058 36.0309 5.40252 36.0927C4.69194 35.8764 4.08949 35.4902 3.59517 34.9341C3.13175 34.3471 2.71467 33.7138 2.34393 33.0341C2.00408 32.3544 1.69513 31.6593 1.41708 30.9487C1.16992 30.2381 0.907315 29.6202 0.629261 29.095C0.629261 28.9714 0.691051 28.9251 0.814631 28.956C0.907315 28.956 1 28.956 1.09268 28.956C0.93821 28.647 0.830078 28.3072 0.768288 27.9364C0.675604 27.5348 0.521129 27.2104 0.304865 26.9632C1.20082 25.0478 2.15856 23.055 3.17809 20.9851C4.19762 18.8842 5.21715 16.7679 6.23668 14.6362C7.28711 12.4735 8.32209 10.3109 9.34162 8.14826C10.392 5.95472 11.3961 3.80753 12.3539 1.70667C13.2189 2.01562 14.0531 2.38636 14.8564 2.81889C15.6905 3.22052 16.4474 3.69939 17.1271 4.2555C17.8068 4.81161 18.3784 5.4604 18.8418 6.20188C19.3361 6.91246 19.6605 7.73118 19.815 8.65802C19.7532 8.84339 19.676 8.90518 19.5833 8.84339C19.4906 8.7816 19.4134 8.8125 19.3516 8.93608C19.506 9.12145 19.5833 9.26047 19.5833 9.35316C19.6142 9.41495 19.6142 9.49219 19.5833 9.58487C19.5524 9.64666 19.5369 9.73935 19.5369 9.86292C19.5369 9.9865 19.6142 10.1564 19.7686 10.3727C19.6142 10.3418 19.506 10.3727 19.4442 10.4654C19.3825 10.5272 19.2743 10.5272 19.1199 10.4654C19.2743 10.8979 19.3207 11.2377 19.2589 11.4849C19.1971 11.7321 19.1044 11.9638 18.9808 12.18C18.8572 12.3654 18.7491 12.5817 18.6564 12.8288C18.5946 13.0451 18.6255 13.354 18.7491 13.7557C18.6255 13.7557 18.5328 13.7866 18.4711 13.8484C18.4402 13.8793 18.4093 13.9256 18.3784 13.9874C18.3475 14.0492 18.3011 14.111 18.2393 14.1728C18.2085 14.2037 18.1312 14.2037 18.0076 14.1728C18.1003 14.976 18.1312 15.7947 18.1003 16.6289C18.0694 17.4322 18.0385 18.2663 18.0076 19.1314C17.9767 19.9656 17.9767 20.8306 18.0076 21.7266C18.0385 22.6225 18.1621 23.5494 18.3784 24.5071C19.7069 23.7347 20.7727 22.7306 21.576 21.4949C22.4102 20.2591 23.0589 18.8842 23.5224 17.3704C24.0167 15.8565 24.3874 14.2346 24.6346 12.5044C24.9126 10.7743 25.1907 9.01332 25.4688 7.22141C25.8086 6.88157 26.0712 6.46449 26.2566 5.97017C26.4728 5.47585 26.6428 4.96609 26.7663 4.44087C26.9208 3.91566 27.0598 3.39045 27.1834 2.86523C27.3379 2.30912 27.5387 1.81481 27.7859 1.38228C28.342 1.44407 28.8054 1.61399 29.1761 1.89204C29.5778 2.1392 29.9485 2.4327 30.2884 2.77255C30.6282 3.0815 30.9835 3.375 31.3542 3.65305C31.725 3.93111 32.1884 4.11648 32.7445 4.20916C33.177 4.82706 33.5787 5.42951 33.9494 6.01651C34.3201 6.57262 34.5673 7.20596 34.6909 7.91655C34.5055 8.2255 34.3665 8.56534 34.2738 8.93608C34.1811 9.30682 34.073 9.67756 33.9494 10.0483C33.8567 10.419 33.7177 10.7589 33.5323 11.0678C33.3469 11.3768 33.0843 11.6394 32.7445 11.8556C32.6518 12.7825 32.5128 13.6475 32.3274 14.4508C32.142 15.2541 31.9721 16.0419 31.8177 16.8143C31.6632 17.5866 31.5241 18.3899 31.4006 19.2241C31.277 20.0582 31.2306 20.9696 31.2615 21.9583C30.9835 22.8542 30.6745 23.7811 30.3347 24.7388C29.9949 25.6657 29.7477 26.5307 29.5932 27.334C29.0062 27.7974 28.5428 28.369 28.2029 29.0487C27.8631 29.7283 27.5078 30.408 27.1371 31.0877C26.9826 31.2113 26.8899 31.2422 26.859 31.1804C26.8281 31.0877 26.6891 31.0259 26.4419 30.995C26.4728 31.2731 26.411 31.4585 26.2566 31.5511C26.133 31.6129 26.1484 31.8292 26.3029 32.1999C25.7777 32.4471 25.3143 32.7715 24.9126 33.1731C24.511 33.5748 24.063 33.9455 23.5687 34.2853C23.1053 34.6252 22.5492 34.8569 21.9004 34.9805C21.2825 35.0732 20.4638 34.9341 19.4442 34.5634C17.9304 33.4512 16.571 32.169 15.3661 30.717C14.1612 29.2649 13.2035 27.5502 12.4929 25.573C12.1839 25.6657 11.9522 25.8665 11.7978 26.1754C11.6433 26.4844 11.5043 26.8088 11.3807 27.1486C11.2571 27.4885 11.1335 27.7974 11.0099 28.0755C10.8864 28.3535 10.701 28.4925 10.4538 28.4925C10.392 28.7706 10.2685 29.0332 10.0831 29.2804C9.92862 29.4966 9.77415 29.7283 9.61967 29.9755C9.4652 30.1918 9.34162 30.4389 9.24894 30.717C9.18715 30.995 9.23349 31.304 9.38796 31.6438ZM44.1799 36.1854C42.8206 36.3707 41.5848 36.3089 40.4725 36C39.3603 35.6911 38.3562 35.2122 37.4603 34.5634C36.5952 33.9146 35.8383 33.1422 35.1895 32.2463C34.5716 31.3503 34.0619 30.3926 33.6602 29.373C33.3822 27.2722 33.4594 25.3722 33.8919 23.6729C34.3245 21.9428 34.9578 20.3517 35.792 18.8997C36.6261 17.4476 37.5684 16.0882 38.6189 14.8216C39.7002 13.5549 40.7352 12.3345 41.7238 11.1605C41.9401 11.2532 42.11 11.2532 42.2336 11.1605C42.388 11.0678 42.5116 10.9442 42.6043 10.7898C42.7279 10.6353 42.8515 10.4808 42.975 10.3263C43.1295 10.1719 43.2994 10.0637 43.4848 10.002C43.6084 9.7239 43.7628 9.49219 43.9482 9.30682C44.1645 9.12145 44.3807 8.95153 44.597 8.79705C44.8442 8.61168 45.0604 8.42631 45.2458 8.24094C45.4621 8.05557 45.6474 7.82386 45.8019 7.54581C46.1109 7.48402 46.3735 7.37589 46.5897 7.22141C46.8369 7.06694 47.0532 6.89702 47.2385 6.71165C47.4548 6.52628 47.6711 6.35636 47.8873 6.20188C48.1036 6.04741 48.3662 5.92383 48.6751 5.83114V5.22869C49.3548 4.91974 49.8491 4.5799 50.1581 4.20916C50.467 3.83842 50.8378 3.35955 51.2703 2.77255C51.6102 2.74165 51.8728 2.72621 52.0581 2.72621C52.2744 2.72621 52.5988 2.69531 53.0313 2.63352C53.3094 2.10831 53.572 1.72212 53.8191 1.47496C54.0663 1.2278 54.4216 0.94975 54.885 0.640801C55.3484 0.88796 55.8428 1.04243 56.368 1.10422C56.8932 1.13512 57.372 1.36683 57.8046 1.79936C57.8355 2.1701 57.9436 2.4636 58.129 2.67986C58.3143 2.86523 58.5152 3.0506 58.7314 3.23597C58.9477 3.39045 59.164 3.56037 59.3802 3.74574C59.5965 3.93111 59.7355 4.19371 59.7973 4.53356C59.9518 4.53356 60.0445 4.50266 60.0754 4.44087C60.1371 4.37908 60.2453 4.36363 60.3997 4.39453C60.4615 4.64169 60.5233 4.84251 60.5851 4.99698C60.6469 5.15145 60.7087 5.29048 60.7705 5.41406C60.8632 5.53764 60.9404 5.67667 61.0022 5.83114C61.0949 5.98562 61.1721 6.17099 61.2339 6.38725C61.0794 6.75799 60.9404 7.15962 60.8168 7.59215C60.6932 7.99378 60.4461 8.27184 60.0754 8.42631C60.0754 8.67347 60.168 8.8125 60.3534 8.84339C60.5388 8.84339 60.6469 8.95153 60.6778 9.16779C60.7087 9.44584 60.6624 9.67756 60.5388 9.86292C61.4038 11.315 62.1917 12.8443 62.9022 14.4508C63.6128 16.0265 64.4161 17.5403 65.312 18.9924C65.2502 19.4249 65.2657 19.8574 65.3584 20.2899C65.482 20.6916 65.621 21.0932 65.7755 21.4949C65.9608 21.8965 66.1307 22.2981 66.2852 22.6998C66.4397 23.1014 66.5478 23.503 66.6096 23.9047C66.6714 24.4299 66.6714 25.0014 66.6096 25.6193C66.5478 26.2063 66.4243 26.7779 66.2389 27.334C66.0535 27.8901 65.8064 28.4153 65.4974 28.9096C65.1885 29.373 64.8332 29.7283 64.4315 29.9755C63.9372 30.5934 63.3193 31.1032 62.5778 31.5048C61.8364 31.8755 61.1567 32.3235 60.5388 32.8487C60.1062 33.0959 59.6428 33.2812 59.1485 33.4048C58.6542 33.4975 58.1444 33.6056 57.6192 33.7292C57.2176 33.9764 56.7387 34.2235 56.1826 34.4707C55.6265 34.687 55.0549 34.8878 54.4679 35.0732C53.8809 35.2585 53.2939 35.413 52.7069 35.5366C52.1199 35.6293 51.5947 35.6447 51.1313 35.5829C50.0191 35.9846 48.9377 36.2626 47.8873 36.4171C46.8369 36.5716 45.6011 36.4943 44.1799 36.1854ZM44.7824 19.3168C44.4734 20.0273 44.1027 20.6761 43.6702 21.2631C43.2685 21.8192 42.8669 22.3908 42.4653 22.9778C42.0636 23.5648 41.7083 24.1982 41.3994 24.8778C41.1213 25.5266 40.9669 26.299 40.936 27.195C41.5539 27.7202 42.2799 28.0446 43.1141 28.1681C43.9791 28.2608 44.8596 28.2763 45.7556 28.2145C46.6515 28.1218 47.5475 27.9982 48.4434 27.8437C49.3394 27.6893 50.1426 27.612 50.8532 27.612C50.8532 27.334 50.9768 27.195 51.224 27.195C52.5216 27.0714 53.7265 26.7161 54.8387 26.1291C55.9509 25.5112 57.1094 24.8933 58.3143 24.2754C58.4688 23.9047 58.6696 23.5803 58.9168 23.3022C59.164 23.0241 59.303 22.6225 59.3339 22.0973C59.1794 21.8192 59.0713 21.5875 59.0095 21.4022C58.9786 21.2168 58.9631 20.9387 58.9631 20.568C58.1599 19.4558 57.4647 18.2509 56.8777 16.9533C56.2907 15.6248 55.611 14.3736 54.8387 13.1996C54.7769 13.354 54.6533 13.5085 54.4679 13.663C54.2826 13.8175 54.0817 13.7866 53.8655 13.5703C53.7728 13.8793 53.6338 14.0955 53.4484 14.2191C53.263 14.3118 53.0468 14.3581 52.7996 14.3581C52.5833 14.3581 52.3516 14.3118 52.1045 14.2191C51.8882 14.1264 51.6874 14.0028 51.502 13.8484C50.4207 14.7134 49.3394 15.5476 48.2581 16.3509C47.2076 17.1541 46.2499 18.0964 45.3848 19.1777C45.2304 19.2704 45.1377 19.3013 45.1068 19.2704C45.0759 19.2395 44.9678 19.255 44.7824 19.3168Z"
                    fill="white"
                  />
                </svg>
              </div>
            </div>
          </div>
        </div>
      ),
      {
        width: 1200,
        height: 675,
      }
    );
  } catch (error) {
    return new Response(JSON.stringify({ message: 'Internal Server Error' }), {
      status: 500,
      headers: { 'Content-Type': 'application/json' },
    });
  }
}
